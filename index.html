<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8"/>
	<title>Mirrors and beams</title>
	<link rel="stylesheet" href="style.css"/>
</head>

<body>
<h1>Mirrors and beams</h1>
<div id="game">
</div>
<script src="drawing.js"></script>
<script src="game.js"></script>
<script src="input.js"></script>
<script src="utils.js"></script>
<script>
var
	root,
	game;
	
window.onload = function() {

	root = id$("game");
	game = initGame(root, 45, 45, 5);

	updateBoard(game);
}

function initGame(root, field_width, field_height, stroke_width) {

	var game = newGame();

	game.svg_settings = {
		field_width,
		field_height,
		stroke_width
	};

	createBoard(game, root);
	createClipBoard(game, root);
	createBoardObjects(game);

	for(var g_el of game.svg_fields)
		for(var field_el of g_el)
			setAttribs(
				field_el,
				["onmousedown", "svgonmousedown(evt)"],
				["onmouseup", "svgonmouseup(evt)"]
			);
	
	for(var clip_field_el of game.svg_clip_fields) {
		setAttribs(
			clip_field_el,
			["onmousedown", "svgonmousedown(evt)"],
			["onmouseup", "svgonmouseup(evt)"]
		);
	}

	return game;
}

</script>
</body>

</html>

